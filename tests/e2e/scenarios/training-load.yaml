appId: com.markboulton.veloready
---
# Phase 2 E2E Test: Training Load Calculation
# This test would have caught the recent fitness trajectory bug
# where CTL/ATL/TSB showed 0 values due to API authentication issues

- launchApp
- tapOn: "Today"

# Verify Training Load section is visible
- assertVisible: "Training Load"

# CRITICAL: Verify CTL is not zero (this would have caught the bug)
- assertVisible: 
    id: "ctl-value"

# CRITICAL: Verify ATL is not zero
- assertVisible:
    id: "atl-value"

# CRITICAL: Verify TSB is displayed (can be negative)
- assertVisible:
    id: "tsb-value"

# Navigate to activity detail to test Fitness Trajectory chart
- tapOn: "Recent Activities"
- tapOn:
    index: 0 # First activity

# Verify Fitness Trajectory chart section
- assertVisible: "Fitness Trajectory"
- assertVisible: "CTL"
- assertVisible: "ATL" 
- assertVisible: "TSB"

# Verify chart has data points (not empty)
- assertVisible:
    id: "fitness-chart"

# Test edge case: Pull to refresh
- swipe:
    direction: DOWN
    start: "50%,20%"
    end: "50%,80%"

# Verify data is still loaded after refresh
- assertVisible: "Training Load"
- assertVisible:
    id: "ctl-value"
