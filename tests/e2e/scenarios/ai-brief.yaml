appId: com.markboulton.veloready
---
# Phase 2 E2E Test: AI Brief Generation Flow
# Tests daily AI brief generation and display

- launchApp
- tapOn: "Today"

# Verify AI Brief card is visible
- assertVisible: "AI Brief"
- assertVisible: "Daily Insights"

# Test AI brief loading
- tapOn: "AI Brief"

# Verify brief generation
- assertVisible: "Generating Brief" # Loading state
- assertVisible: "Great recovery!" # Sample brief text

# Verify brief content structure
- assertVisible: "Recovery Score"
- assertVisible: "Training Load"
- assertVisible: "Sleep Quality"

# Test brief detail view
- tapOn: "View Details"

# Verify detailed metrics
- assertVisible: "Detailed Analysis"
- assertVisible: "HRV"
- assertVisible: "RHR"
- assertVisible: "Sleep Score"

# Test back navigation
- tapOn: "Back"
- assertVisible: "AI Brief"

# Test refresh functionality
- tapOn: "Refresh"

# Verify brief updates
- assertVisible: "Generating Brief"
- assertVisible: "Great recovery!" # Updated brief

# Test error handling (if brief generation fails)
- runScript:
    script: |
      # Simulate network error by turning off WiFi
      maestro.setLocation(0, 0) # This might trigger network issues
      
- tapOn: "Refresh"

# Verify error handling
- assertVisible: "Unable to generate brief" # Error message
- assertVisible: "Try Again"

# Test retry functionality
- tapOn: "Try Again"
- assertVisible: "Generating Brief"
