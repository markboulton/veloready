appId: com.markboulton.veloready
---
# Phase 2 E2E Test: Activity Sync Flow
# Tests manual activity sync and data loading

- launchApp
- tapOn: "Activities"

# Verify activities tab loads
- assertVisible: "Activities"

# Test pull-to-refresh
- swipe:
    direction: DOWN
    start: "50%,20%"
    end: "50%,80%"

# Verify loading indicator appears
- assertVisible: "Syncing Activities" # or similar loading text

# Wait for sync to complete (max 30 seconds)
- runScript:
    timeout: 30000
    script: |
      while true:
        if maestro.getVisibleText().contains("Syncing") == false:
          break
        time.sleep(1)

# Verify activities are loaded
- assertVisible: "Recent Activities"
- assertVisible:
    index: 0 # First activity should be visible

# Test activity detail view
- tapOn:
    index: 0 # First activity

# Verify activity details
- assertVisible: "Activity Details"
- assertVisible: "Distance"
- assertVisible: "Duration"
- assertVisible: "Average Power" # If power data available

# Test back navigation
- tapOn: "Back"
- assertVisible: "Activities"

# Test different activity types if available
- tapOn:
    index: 1 # Second activity (if exists)

# Verify different activity types display correctly
- assertVisible: "Activity Details"

# Test search/filter functionality
- tapOn: "Search" # If search button exists
- inputText: "Ride"
- assertVisible: "Filtered Results"

# Clear search
- tapOn: "Clear"
- assertVisible: "Recent Activities"
